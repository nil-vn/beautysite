function bawmrp_open_find_posts_dialog(a){a.preventDefault();bawmrpFindPosts.open("from_post",bawmrp_js.ID)}var bawmrpFindPosts;(function(a){bawmrpFindPosts={open:function(b,c){a(".find-box-search .spinner").hide();var d=document.documentElement.scrollTop||a(document).scrollTop();if(b&&c){a("#affected").attr("name",b).val(c)}a("#find-posts").show().draggable({handle:"#find-posts-head"}).css({top:d+50+"px",left:"50%",marginLeft:"-250px"});a("#find-posts-input").focus().keyup(function(a){if(a.which==27){bawmrpFindPosts.close()}});return false},close:function(){a(".find-box-search .spinner").hide();a("#find-posts").draggable("destroy").hide()},send:function(){$pt="";a(".find-box-search .spinner").show();a('input[name="find-posts-what[]"]:checked').each(function(){$pt+=a(this).val()+","});var b={ps:a("#find-posts-input").val(),action:"bawmrp_ajax_find_posts",_ajax_nonce:a("#_ajax_nonce").val(),post_type:$pt};a.ajax({type:"POST",url:ajaxurl,data:b,success:function(a){bawmrpFindPosts.show(a)},error:function(a){bawmrpFindPosts.error(a)}})},show:function(b){a(".find-box-search .spinner").hide();if(typeof b=="string"){this.error({responseText:b});return}var c=wpAjax.parseAjaxResponse(b);if(c.errors){this.error({responseText:wpAjax.broken})}c=c.responses[0];a("#find-posts-response").html(c.data)},error:function(b){a(".find-box-search .spinner").hide();var c=b.statusText;if(b.responseText){c=b.responseText.replace(/<.[^<>]*?>/g,"")}if(c){a("#find-posts-response").html(c)}}};a(document).ready(function(){})})(jQuery);jQuery(document).ready(function(){jQuery("#find-posts-submit").click(function(a){if(""==jQuery("#find-posts-response").html())a.preventDefault()});jQuery("#find-posts .find-box-search :input").keypress(function(a){if(13==a.which){bawmrpFindPosts.send();return false}});jQuery("#find-posts-search").click(bawmrpFindPosts.send);jQuery("#find-posts-close").click(bawmrpFindPosts.close);jQuery("#bawmrp_open_find_posts_button").on("click",bawmrp_open_find_posts_dialog);jQuery("#bawmrp_delete_related_posts").click(function(){jQuery("#ul_yyarpp").animate({opacity:0},500,function(){jQuery(this).html("");jQuery("#bawmrp_post_ids").val("");jQuery(this).css("opacity","1")})});jQuery("body:first").prepend(jQuery(".find-box-search input#_ajax_nonce"));jQuery("#ul_yyarpp").sortable({update:function(a,b){var c=[];jQuery("#ul_yyarpp li").each(function(a,b){c.push(jQuery(b).attr("data-id"))});jQuery("#bawmrp_post_ids").val(c.join(","))},revert:true,placeholder:"sortable-placeholder",tolerance:"pointer",axis:"y",containment:"parent",cursor:"move",forcePlaceholderSize:true,dropOnEmpty:false});jQuery("#find-posts-submit").click(function(a){a.preventDefault();if(jQuery('input[name="found_post_id[]"]:checked').length==0)return false;jQuery('input[name="found_post_id[]"]:checked').each(function(a){var b=jQuery(this).val();var c=new Array;c=jQuery("#bawmrp_post_ids").val()!=""?jQuery("#bawmrp_post_ids").val().split(","):[];if(jQuery.inArray(b,c)=="-1"&&b!=bawmrp_js.ID){c.push(b);jQuery("#bawmrp_post_ids").val(c);jQuery(this).parent().parent().css("background","#FF0000").fadeOut(500,function(){jQuery(this).remove()});var d=jQuery(this).parent().next().text();d=d.replace(/</g,"<");d=d.replace(/>/g,">");var e='<li data-id="'+b+'"><span style="float:none;"><a class="erase_yyarpp">X</a>  '+d+"</span></li>";jQuery("#ul_yyarpp").append(e)}});return false});setInterval(function(){if(jQuery("#find-posts-response input:checkbox").length>0){var a=jQuery("#bawmrp_post_ids").val().split(",");jQuery('#find-posts-response input[value="'+bawmrp_js.ID+'"]').attr("disabled","disabled");jQuery("#find-posts-response input").filter(function(b){return jQuery.inArray(jQuery(this).val(),a)>-1}).attr("disabled","disabled").attr("checked","checked")}},100);jQuery(".erase_yyarpp").live("click",function(){var a=jQuery(this).parent().parent().attr("data-id");jQuery(this).parent().parent().fadeOut(500,function(){jQuery(this).remove()});var b=","+jQuery("#bawmrp_post_ids").val()+",";b=b.replace(","+a+",",",");jQuery("#bawmrp_post_ids").val(b.length>1?b.substring(1,b.length-1):"")})})